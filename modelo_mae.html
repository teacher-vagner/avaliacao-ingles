<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Avaliação – Língua Inglesa</title>
<script src="config.js"></script>

<style>
body{
  font-family:Arial, sans-serif;
  max-width:900px;
  margin:auto;
  background:#f4f6fb;
  padding:20px;
}
h1,h2,h3{color:#1f4fd8}
.box{
  background:#fff;
  border-radius:8px;
  padding:15px;
  margin-bottom:20px;
}
.linha{
  display:flex;
  gap:10px;
}
.linha input, .linha select{
  padding:6px;
}
.nome{width:70%}
.numero{width:10%}
.turma{width:20%}
.errada{color:#c62828}
.correta{color:#2e7d32}
textarea{width:100%;height:70px}
button{
  padding:12px 18px;
  font-size:16px;
  border:none;
  border-radius:6px;
  background:#1f4fd8;
  color:#fff;
  cursor:pointer;
}
</style>
</head>

<body>

<img src="midia/imagens/teacher.jpg" width="100%">

<h1>Avaliação de Língua Inglesa</h1>

<div class="box">
  <label>Escola</label><br>
  <input id="escola" readonly style="width:100%"><br><br>

  <div class="linha">
    <input id="nome" class="nome" placeholder="Nome do aluno">
    <input id="numero" class="numero" type="number" placeholder="Nº">
    <select id="turma" class="turma">
      <option value="">Turma</option>
      <option>A</option><option>B</option><option>C</option>
      <option>D</option><option>E</option><option>F</option>
    </select>
  </div>
</div>

<form id="quiz" class="box"></form>

<button onclick="finalizar()">Enviar e ver resultado</button>

<div id="resultado" class="box"></div>

<script>
document.getElementById("escola").value = CONFIG.escola;

/************** QUESTÕES **************/
const questoes = [
 // WRITING
 {tipo:'aberta', habilidade:'Writing', q:'Read: "My name is Anna." Who is the text about?', r:'Anna'},
 {tipo:'aberta', habilidade:'Writing', q:'Read: "I am 11 years old." How old is the person?', r:'11'},

 // LISTENING
 {tipo:'aberta', habilidade:'Listening', q:'Listen to the audio and write what you hear.', r:'hello'},
 {habilidade:'Listening', q:'Choose the correct greeting.', a:['Good night','Good morning','Goodbye','Thanks'], c:1},
 {habilidade:'Listening', q:'Choose the correct question.', a:['How are you?','What is your name?','Where are you from?','How old are you?'], c:1},
 {habilidade:'Listening', q:'Choose the correct answer.', a:['Blue','Ten','Yes, I am','I am fine'], c:3},

 // READING / GRAMMAR
 {habilidade:'Reading', q:'I ___ a student.', a:['am','is','are','be'], c:0},
 {habilidade:'Reading', q:'She ___ my friend.', a:['am','is','are','be'], c:1},
 {habilidade:'Reading', q:'They ___ students.', a:['am','is','are','be'], c:2},
 {habilidade:'Reading', q:'He ___ 12 years old.', a:['am','is','are','be'], c:1}
];

/************** MONTAGEM **************/
const form = document.getElementById('quiz');
questoes.forEach((q,i)=>{
 let html = `<h3>${i+1}. (${q.habilidade})</h3><p>${q.q}</p>`;
 if(q.tipo === 'aberta'){
   html += `<textarea id="q${i}"></textarea>`;
 } else {
   q.a.forEach((alt,j)=>{
     html += `<input type="radio" name="q${i}" value="${j}"> ${alt}<br>`;
   });
 }
 form.innerHTML += html;
});

/************** CORREÇÃO **************/

function finalizar(){
  let pontos = 0;
  let total = questoes.length;
  let respostasTexto = "";

  questoes.forEach((q,i)=>{
    if(q.a){
      const r = document.querySelector(`input[name="q${i}"]:checked`);
      if(r && Number(r.value) === q.c){
        pontos++;
        respostasTexto += `${i+1}. (${q.habilidade}) ✔ ${q.a[r.value]}\n`;
      } else {
        respostasTexto += `${i+1}. (${q.habilidade}) ✘ ${r ? q.a[r.value] : 'Não respondeu'} | Correta: ${q.a[q.c]}\n`;
      }
    } else {
      const txt = document.getElementById(`q${i}`).value.trim();
      if(txt.toLowerCase() === q.r.toLowerCase()) pontos++;
      respostasTexto += `${i+1}. (${q.habilidade}) ${txt}\n`;
    }
  });

  const nota = Math.round((pontos / total) * 10);
  const feedback = nota >= 6 ? "Parabéns! Bom desempenho." : "Precisa revisar os conteúdos.";

  // MOSTRA NA TELA
  document.getElementById("resultado").innerHTML =
    `Aluno: ${nome.value}<br>
     Número: ${numero.value}<br>
     Turma: ${turma.value}<br>
     Nota: ${nota}/10<br>
     ${feedback}`;

  // MONTA EMAIL
  const corpoEmail =
`ESCOLA: ${escola.value}
ALUNO: ${nome.value}
NÚMERO: ${numero.value}
TURMA: ${turma.value}

NOTA: ${nota}/10
FEEDBACK: ${feedback}

RESPOSTAS DO ALUNO:
${respostasTexto}`;

  window.location.href =
    `mailto:${CONFIG.emailProfessor}?subject=Avaliação de Inglês&body=${encodeURIComponent(corpoEmail)}`;
}
</script>


</body>
</html>

