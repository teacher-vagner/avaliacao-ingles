<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>6º Ano – Inglês – 1º Bimestre</title>

<script>
/**************** CONFIG GLOBAL ****************/
const CONFIG = {
  escola: "English Vagner's School",
  emailProfessor: "teacher.vagnerrocha79@gmail.com"
};
</script>

<style>
body{font-family:Arial;max-width:900px;margin:auto;background:#f4f6fb;padding:20px}
h1,h2,h3{color:#1f4fd8}
.box{background:#fff;border-radius:8px;padding:15px;margin-bottom:20px}
.linha{display:flex;gap:10px}
.linha input,.linha select{padding:6px}
.nome{width:70%}.numero{width:10%}.turma{width:20%}
textarea{width:100%;height:70px}
button{padding:12px 18px;font-size:16px;border:none;border-radius:6px;background:#1f4fd8;color:#fff;cursor:pointer}
.bncc{font-size:13px;color:#555}
.correta{color:#2e7d32;font-weight:bold}
.errada{color:#c62828;font-weight:bold}
</style>
</head>

<body>

<img src="teacher.jpg" width="100%">
<h1>Avaliação de Língua Inglesa</h1>
<h3>6º Ano – 1º Bimestre</h3>

<div class="box">
<label>Escola</label><br>
<input id="escola" readonly style="width:100%"><br><br>
<div class="linha">
<input id="nome" class="nome" placeholder="Nome do aluno">
<input id="numero" class="numero" placeholder="Nº">
<select id="turma" class="turma">
<option value="">Turma</option>
<option>A</option><option>B</option><option>C</option>
<option>D</option><option>E</option><option>F</option>
</select>
</div>
</div>

<form id="quiz" class="box"></form>
<button type="button" onclick="finalizar()">Enviar e ver resultado</button>
<div id="resultado" class="box"></div>

<script>
/**************** CONSTANTES ****************/
const SERIE="6º Ano";
const BIMESTRE="1º Bimestre";

/**************** FUNÇÕES ****************/
function normalizar(t){
  return t.trim().replace(/\s+/g," ").toLowerCase();
}

function sortear(lista, qtd){
  return [...lista].sort(()=>0.5-Math.random()).slice(0,qtd);
}

/**************** BANCO DE QUESTÕES ****************/
const blocos = [

{
 hab:"Writing",
 bncc:"EF06LI01",
 tipo:"writing",
 itens:[
  {id:"W01",enunciado:"our / did / We / school / homework / after",resposta:"we did our homework after school."},
  {id:"W02",enunciado:"go / yesterday / Did / to / school / you",resposta:"did you go to school yesterday?"},
  {id:"W03",enunciado:"played / yesterday / soccer / They",resposta:"they played soccer yesterday."},
  {id:"W04",enunciado:"last / studied / English / She / night",resposta:"she studied english last night."},
  {id:"W05",enunciado:"grandparents / visited / our / We",resposta:"we visited our grandparents."}
 ]
},

{
 hab:"Listening",
 bncc:"EF06LI03",
 tipo:"listening",
 audio:"audio2.mp3",
 itens:[
  {id:"L01",pergunta:"Where did Kate go?",opcoes:["Paris","London","Rome","Berlin"],correta:0},
  {id:"L02",pergunta:"Who did she go with?",opcoes:["mother","sister","friend","father"],correta:1},
  {id:"L03",pergunta:"How did she travel?",opcoes:["car","plane","train","bus"],correta:1},
  {id:"L04",pergunta:"How long did she stay?",opcoes:["5 days","1 week","1 month","2 days"],correta:0},
  {id:"L05",pergunta:"Did she like the trip?",opcoes:["Yes","No","Maybe","Not mentioned"],correta:0}
 ]
},

{
 hab:"Reading",
 bncc:"EF06LI04",
 tipo:"reading",
 texto:"Kate went to Paris last year with her sister. They stayed there for five days.",
 itens:[
  {id:"R01",pergunta:"Where did Kate go?",opcoes:["Paris","London","Rome","Berlin"],correta:0},
  {id:"R02",pergunta:"Who went with her?",opcoes:["mother","sister","friend","father"],correta:1},
  {id:"R03",pergunta:"How long did they stay?",opcoes:["5 days","1 week","1 month","2 days"],correta:0},
  {id:"R04",pergunta:"When did she go?",opcoes:["last year","last month","yesterday","today"],correta:0},
  {id:"R05",pergunta:"Did Kate travel alone?",opcoes:["Yes","No","Not mentioned","Maybe"],correta:1}
 ]
},

{
 hab:"Grammar",
 bncc:"EF06LI05",
 tipo:"grammar",
 itens:[
  {id:"G01",pergunta:"She ___ my friend.",opcoes:["am","is","are","be"],correta:1},
  {id:"G02",pergunta:"They ___ students.",opcoes:["am","is","are","be"],correta:2},
  {id:"G03",pergunta:"I ___ a student.",opcoes:["am","is","are","be"],correta:0},
  {id:"G04",pergunta:"He ___ 12 years old.",opcoes:["am","is","are","be"],correta:1},
  {id:"G05",pergunta:"We ___ happy.",opcoes:["am","is","are","be"],correta:2}
 ]
}

];

/**************** MONTAGEM COM SORTEIO ****************/
document.getElementById("escola").value = CONFIG.escola;
const form=document.getElementById("quiz");
let contador=0;
let prova=[];

blocos.forEach(b=>{
  const sorteadas = sortear(b.itens,5);
  prova.push({ ...b, itens:sorteadas });

  form.innerHTML+=`<h3>${b.hab}</h3><div class="bncc">BNCC: ${b.bncc}</div>`;
  if(b.audio) form.innerHTML+=`<audio controls src="${b.audio}"></audio>`;
  if(b.texto) form.innerHTML+=`<p><em>${b.texto}</em></p>`;

  sorteadas.forEach(item=>{
    contador++;
    if(b.tipo==="writing"){
      form.innerHTML+=`
      <p>${contador}. ${item.enunciado}</p>
      <div class="bncc">ID: ${item.id}</div>
      <textarea id="q${contador}"></textarea>`;
    } else {
      form.innerHTML+=`<p>${contador}. ${item.pergunta}</p>`;
      item.opcoes.forEach((op,i)=>{
        form.innerHTML+=`<label><input type="radio" name="q${contador}" value="${i}"> ${op}</label><br>`;
      });
    }
  });
});

/**************** CORREÇÃO ****************/
function finalizar(){
  let pontos=0;
  let q=0;
  let feedback="";
  let relatorio=`RELATÓRIO DO PROFESSOR – A1\n\n`;

  prova.forEach(b=>{
    b.itens.forEach(item=>{
      q++;
      let resp="", correta="", ok=false;

      if(b.tipo==="writing"){
        resp = normalizar(document.getElementById(`q${q}`).value);
        correta = normalizar(item.resposta);
        ok = resp===correta;
      } else {
        const r=document.querySelector(`input[name="q${q}"]:checked`);
        resp = r?item.opcoes[r.value]:"Não respondeu";
        correta = item.opcoes[item.correta];
        ok = r && Number(r.value)===item.correta;
      }

      if(ok){
        pontos++;
        feedback+=`<p class="correta">${q}. ✔ Correta</p>`;
      } else {
        feedback+=`<p class="errada">${q}. ✘ Correta: ${correta}</p>`;
      }

      relatorio+=`
ID: ${item.id}
HABILIDADE: ${b.hab}
BNCC: ${b.bncc}
ALUNO: ${resp}
CORRETA: ${correta}
RESULTADO: ${ok?"CORRETA":"INCORRETA"}
--------------------------
`;
    });
  });

  document.getElementById("resultado").innerHTML=`
  <h3>Resultado do Aluno</h3>
  <strong>Aluno:</strong> ${nome.value}<br>
  <strong>Escola:</strong> ${CONFIG.escola}<br>
  <strong>Nota:</strong> ${(pontos*0.5).toFixed(1)}/10
  <hr>${feedback}`;

  window.location.href=`mailto:${CONFIG.emailProfessor}?subject=Relatório ${SERIE}&body=${encodeURIComponent(relatorio)}`;
}
</script>

</body>
</html>


